
# Задание
Проблема заказчика:
Компания планирует запустить новую платформу для обработки пользовательских запросов для вызова такси. Платформа должна быть масштабируемой, отказоустойчивой и соответствовать требованиям безопасности. Система должна выдерживать пиковую нагрузку в 50 000 запросов в секунду и обеспечивать согласованность данных.

# 1. Функциональные требования
* Заявка должна быть отправлена по нажатию на кнопку
* После отправки заявки кнопка должна быть заблокирована
* Возможность отправки двух разных заявок, дедупликация
* Заявки можно отправлять с web, mobile, api
* У заявки должен быть жизненный цикл
* У заявки есть исполнитель, и заявитель
* Заявку можно редактировать после отправки, но только некоторые поля
* Заявка должна запускать бизнес процесс на бэкэнде
* Заявка должна иметь систему оценки
* Должна быть роль администратора, имеющего права изменять любую заявку*
* *пользователь должен получать уведомления о смене статуса*
* *история изменений заявки должна сохраняться*
* *просмотр списка заявок, фильтрация, поиск*

# 2. Нефункциональные требования
### Производительность
* в пике 50к заявок без просадки в производительности
* 99p rps 5к
* latency 99p 200ms
* latency high season 1000ms
* *throughput за минуту может быть обработано 100к заявок при средней нагрузке*
### Отказоустойчивость
* система должна функционировать при отказе некритичных узлов
* при авариях должна быть graceful degradation
* RTO=1час RPO=5мин
* *Circuit breaker. Для исключения лавинообразного падения части сервисов применяем circuit breaker*
* *rate limiting*
* *fallback сценарии*
### Безопасность
* должна быть авторизация/аутентификация, OIDC
* пользователь может просматривать только свою заявку
* данные должны передаваться по защищенным протоколам, внутренние взаимодействия по mtls
* *Аудит. Кто и когда изменил заявку*
### Масштабируемость
* должен быть автоскейлинг в high season
* должна быть возможность горизонтального масштабироваться на регионы
* должна быть возможность горизонтального масштабироваться на органический рост
* *stateful stateless компоненты*
* *event driven архитектура*
### Доступность
* система должна оставаться доступна при проблемах в сети или ее узлах
* *SLA=99.99%*
* *резервные каналы связи между ЦОД*
### Согласованность данных
* должна быть eventual consistency
* max время несогласованности 3 мин
* *конфликт версий при параллельных обновлениях*
* *где нужна strong consistency*

# 3. Архитектура системы

Архитектура системы
![Архитектура](https://github.com/serjteplov/system-design/blob/5e495cb6f1ee95aff7ac2c6b11e54f3ea0916b90/dz7%20-%20final%20project/arch.jpg)

Деплоймент диаграмма
![Развертывание](https://github.com/serjteplov/system-design/blob/5e495cb6f1ee95aff7ac2c6b11e54f3ea0916b90/dz7%20-%20final%20project/dep.jpg)

# 4. Выбор технологий

tbd

# 5. Реализация нефункциональных требований

tbd

# 6. Риски и компромиссы

tbd
